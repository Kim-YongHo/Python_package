#!/usr/bin/env python
# coding: utf-8

# ### í™•ë¥  ë¶„í¬
# - í™•ë¥ ë³€ìˆ˜ê°€ ì–´ë–»ê²Œ ì›€ì§ì´ëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚¸ ê²ƒ

# ### í™•ë¥  ë³€ìˆ˜ì˜ êµ¬ë¶„
# 
# - ì´ì‚° í™•ë¥  ë³€ìˆ˜ : ë³€ìˆ˜ê°€ ì·¨í•  ìˆ˜ ìˆëŠ” ê°’ì˜ ê°œìˆ˜ê°€ ìœ í•œ
#     
# - ì—°ì† í™•ë¥  ë³€ìˆ˜ : ë³€ìˆ˜ê°€ ì·¨í•  ìˆ˜ ìˆëŠ” ê°’ì˜ ê°œìˆ˜ê°€ ë¬´í•œ
#     
# ![image.png](attachment:image.png)

# ### í™•ë¥ í•¨ìˆ˜
# - í™•ë¥ ë³€ìˆ˜ Xê°€ íŠ¹ì • ì‹¤ìˆ˜ ê°’ xë¥¼ ì·¨í•  í™•ë¥ ì„ Xì˜ í•¨ìˆ˜(f)ë¡œ ë‚˜íƒ€ë‚¸ ê²ƒ
#     - í™•ë¥ ì§ˆëŸ‰í•¨ìˆ˜(probability mass function: pmf)
#         - í™•ë¥ ë³€ìˆ˜ê°€ ì´ì‚°í˜•ì¸ ê²½ìš°
#     - í™•ë¥ ë°€ë„í•¨ìˆ˜(probability density function: pdf)
#         - í™•ë¥ ë³€ìˆ˜ê°€ ì—°ì†í˜•ì¸ ê²½ìš°

# ### í™•ë¥ ë¶„í¬ì˜ í‰ê· (mean) - ê¸°ëŒ€ê°’
# 
# - ê¸°ëŒ€ê°’(expected value)ë¼ê³  í•¨
# -  í™•ë¥  ë³€ìˆ˜ì˜ ê¸°ëŒ€ê°’({E})ì€ ê° ì‚¬ê±´ì´ ë²Œì–´ì¡Œì„ ë•Œì˜ ì´ë“ê³¼ ê·¸ ì‚¬ê±´ì´ ë²Œì–´ì§ˆ í™•ë¥ ì„ ê³±í•œ ê²ƒì„ ì „ì²´ ì‚¬ê±´ì— ëŒ€í•´ í•©í•œ ê°’ì´ë‹¤. 
#     - ì–´ë–¤ í™•ë¥ ì  ì‚¬ê±´ì— ëŒ€í•œ í‰ê· ì˜ ì˜ë¯¸ë¡œ ìƒê°í•  ìˆ˜ ìˆë‹¤.
# 
#     - E(X) ë˜ëŠ” Î¼X ë¡œ í‘œì‹œ
#     - ì´ì‚°í™•ë¥ ë¶„í¬ì˜ ê¸°ëŒ€ê°’ : í™•ë¥ ì„ ê°€ì¤‘ê°’ìœ¼ë¡œ ì‚¬ìš©í•œ ê°€ì¤‘í‰ê· 
#     - ì—°ì†í™•ë¥ ë¶„í¬ì˜ ê¸°ëŒ€ê°’ : ì ë¶„ê°œë…ì˜ ë©´ì 
#     
#     ![image.png](attachment:image.png)
#     
# - ëª¨í‰ê· 
#     - ëª¨ í‰ê· (population mean) Î¼ëŠ” ëª¨ ì§‘ë‹¨ì˜ í‰ê· ì´ë‹¤. ëª¨ë‘ ë”í•œ í›„ ì „ì²´ ë°ì´í„° ìˆ˜ nìœ¼ë¡œ ë‚˜ëˆˆë‹¤.

# ### ì´ì‚°í˜• í™•ë¥  ë¶„í¬
# 
# - 1ì°¨ì› ì´ì‚°í˜• í™•ë¥  ë¶„í¬

# In[2]:


from IPython.core.interactiveshell import InteractiveShell
InteractiveShell.ast_node_interactivity="all"


# In[3]:


import numpy as np
import matplotlib.pyplot as plt

get_ipython().run_line_magic('precision', '3')
get_ipython().run_line_magic('matplotlib', 'inline')


# #### ì´ì‚°í˜• í™•ë¥ 
# - í™•ë¥ ë³€ìˆ˜ xê°€ ì·¨í•  ìˆ˜ ìˆëŠ” ê°’ì˜ ì§‘í•© {x_1, x_2,..., x_k}
# - xê°€ x_kë¼ëŠ” ê°’ì„ ì·¨í•˜ëŠ” í™•ë¥ 
# ![image.png](attachment:image.png)
# - í™•ë¥  ì§ˆëŸ‰í•¨ìˆ˜(í™•ë¥ í•¨ìˆ˜)-pmf
# ![image-2.png](attachment:image-2.png)

# ## ë¶ˆê³µì •í•œ ì£¼ì‚¬ìœ„
# ![image.png](attachment:image.png)

# - ìœ„ ë¶ˆê³µì •í•œ ì£¼ì‚¬ìœ„ í™•ë¥ ë¶„í¬ì˜ í™•ë¥  ë³€ìˆ˜ í™•ì¸
# ![](ë¶ˆê³µì •í•œì£¼ì‚¬ìœ„í™•ë¥ ë³€ìˆ˜.png)

# In[7]:


# ìœ„ ì‹ì„ í•¨ìˆ˜ë¡œ êµ¬í˜„

def f(x) :
    if x in x_set :
        return x/21
    else : 
        return 0


# In[8]:


# í™•ë¥  ë³€ìˆ˜ê°€ ì·¨í•  ìˆ˜ ìˆëŠ” ê°’ì˜ set
x_set=np.array([1,2,3,4,5,6])


# In[9]:


# í™•ë¥ ë³€ìˆ˜ X
X=[x_set,f] # í™•ë¥ ë¶„í¬[x_set,f]ì— ì˜í•´ í™•ë¥ ë³€ìˆ˜ Xì˜ ë™ì‘ì´ ê²°ì •ë¨


# In[14]:


# í™•ë¥  p_kë¥¼ êµ¬í•œë‹¤
prob = np.array([f(x_k) for x_k in x_set])
x_set
prob
zip(x_set,prob)
# x_k ì™€ p_kì˜ ëŒ€ì‘ì„ ì‚¬ì „ì‹ìœ¼ë¡œ í‘œì‹œ
dict(zip(x_set,prob))


# ![image.png](attachment:image.png)

# In[16]:


# ì´ì‚°í˜• í™•ë¥ ë¶„í¬ ê·¸ë˜í”„
fig=plt.figure(figsize=(10,6))
ax = fig.add_subplot(111)
ax.bar(x_set, prob)
ax.set_xlabel('value')
ax.set_ylabel('probability')

plt.show()


# #### ì´ì‚°í˜• í™•ë¥ ë¶„í¬ ì„±ì§ˆ
# 
# - ëª¨ë“ í™•ë¥ ì€ 0ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì•„ì•¼ í•˜ê³ 
# - í™•ë¥ ì˜ í•©ì€ 1ì´ë‹¤
# 
# ![image.png](attachment:image.png)

# In[17]:


prob


# In[18]:


np.sum(prob)
np.all(prob >= 0)


# ### ëˆ„ì ë¶„í¬í•¨ìˆ˜(ë¶„í¬í•¨ìˆ˜) ğ¹(ğ‘¥)
# - Xê°€ xì´í•˜ê°€ ë ë•Œì˜ í™•ë¥ ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
# - ëˆ„ì ë¶„í¬í•¨ìˆ˜(cdf)ëŠ” ì£¼ì–´ì§„ í™•ë¥ ë³€ìˆ˜ê°€ íŠ¹ì • ê°’ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ í™•ë¥ ì„ ë‚˜íƒ€ë‚´ëŠ” í•¨ìˆ˜
# ![image.png](attachment:image.png)

# In[21]:


# ì‘ê±°ë‚˜ ê°™ì€ ì´ë¯€ë¡œ ì£¼ì–´ì§„ xë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ ë™ì•ˆì˜ í™•ë¥ ì„ ëª¨ë‘ ë”í•¨ - f(x) í™•ë¥ í•¨ìˆ˜
def F(x) :
    return np.sum([f(x_k) for x_k in x_set if x_k <= x])


# In[22]:


# ì£¼ì‚¬ìœ„ì˜ ëˆˆì´ 3ì´í•˜ê°€ ë  í™•ë¥ 
F(3) # x_setì˜ ì›ì†Œê°’ì´ 3ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ë•Œê¹Œì§€ì˜ í™•ë¥ ì˜ í•©ê³„
f(3) # x_setì˜ ì›ì†Œê°’ì´ 3ì¼ë•Œ í™•ë¥ 


# ### í™•ë¥ ë³€ìˆ˜ì˜ ë³€í™˜
# 
# - í™•ë¥ ë³€ìˆ˜ì— ì—°ì‚°ì„ ì ìš©ì‹œì¼œ ë³€í™”ì‹œí‚¨ë‹¤ê³  ê°€ì • => ìƒˆë¡œìš´ ë°ì´í„° ì§‘í•© => í™•ë¥ ë³€ìˆ˜ê°€ ë¨ 
# 
# - í™•ë¥ ë³€ìˆ˜ì˜ ë³€í™˜ ì—°ì‚° : 2X+3 
# - ìœ„ ì—°ì‚°ì„ ì ìš©ì‹œì¼œ ë³€í™˜ëœ í™•ë¥ ë³€ìˆ˜ë¥¼ Yë¼ê³  í•œë‹¤ë©´

# In[24]:


y_set=np.array([2*x_k + 3 for x_k in x_set])

prob = np.array([f(x_k) for x_k in x_set])

dict(zip(y_set, prob))


# #### 1ì°¨ì› ì´ì‚°í˜• í™•ë¥ ë³€ìˆ˜ì˜ ì§€í‘œ

# In[ ]:


- í™•ë¥ ë³€ìˆ˜ì˜ í‰ê·  : ê¸°ëŒ“ê°’
    - í™•ë¥ ë³€ìˆ˜ë¥¼ ë¬´ì œí•œ ì‹œí–‰í•˜ì—¬ ì–»ì€ ì‹¤í—˜ê°’ì˜ í•©ì‚°


# ![image.png](attachment:image.png)

# - ìˆ˜ì‹ì„ í•¨ìˆ˜ë¡œ êµ¬í˜„
# ![image.png](attachment:image.png)
# 
# - ì¸ìˆ˜ gê°€ í™•ë¥ ë³€ìˆ˜ì—ëŒ€í•œ ì—°ì‚°ì„ êµ¬í˜„í•œ í•¨ìˆ˜
#     - gì— ì•„ë¬´ê²ƒë„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ í™•ë¥ ë³€ìˆ˜ Xì˜ ê¸°ëŒ“ê°’ì´ êµ¬í•´ì§

# #### ë¶ˆê³µì • ì£¼ì‚¬ìœ„ í™•ë¥ ì— ëŒ€í•œ ê¸°ëŒ€ê°’

# In[25]:


# ë¶ˆê³µì • ì£¼ì‚¬ìœ„ì— ëŒ€í•œ í™•ë¥  ë³€ìˆ˜

X =[x_set, f]


# In[26]:


def f(x):
    if x in x_set:
        return x / 21
    else:
        return 0
    
x_set = np.array([1, 2, 3, 4, 5, 6])    


# In[27]:


[x_k * f(x_k) for x_k in x_set]


# In[28]:


np.sum([x_k * f(x_k) for x_k in x_set])


# In[29]:


prob


# In[30]:


# ê¸°ëŒ“ê°’í™•ì¸
1*0.048 + 2*0.095+3*0.143+4*0.19 + 5*0.238+6*0.286


# In[31]:


sample = np.random.choice(x_set, int(1e6), p=prob)
np.mean(sample)


# In[32]:


# ê¸°ëŒ€ê°’ í•¨ìˆ˜ êµ¬í˜„
def E(X, g=lambda x:x) :
    x_set, f = X
    return np.sum([g(x_k) * f(x_k) for x_k in x_set])


# In[33]:


E(X)


# In[40]:


E(X, g=lambda x : 2*x+3)


# In[44]:


2 * E(X) + 3


# ### ë¶„ì‚°
# 
# - í™•ë¥ ë³€ìˆ˜ì˜ ê° ê°’ì—ì„œ ê¸°ëŒ€ê°’ì„ ëº€ í¸ì°¨ì˜ ì œê³±ì„ ê³„ì‚°í•œí›„ ê¸°ëŒ€ê°’ìœ¼ë¡œ ê³„ì‚°
# 
# ![image.png](attachment:image.png)

# ### ë¶ˆê³µì •í•œ ì£¼ì‚¬ìœ„ì˜ ë¶„ì‚°

# In[34]:


### ë¶ˆê³µì •í•œ ì£¼ì‚¬ìœ„ì˜ ê¸°ëŒ€ê°’ í•¨ìˆ˜ E(X)

mean= E(X)
np.sum([(x_k-mean)**2 * f(x_k) for x_k in x_set])


# In[37]:


def V(X, g=lambda x: x) :
    x_set, f = X
    mean = E(X,g)
    return np.sum([(g(x_k)-mean)**2 * f(x_k) for x_k in x_set])
    


# In[38]:


V(X)


# - í™•ë¥ ë³€ìˆ˜ X ëŒ€í•œ ë³€í™˜ë³€ìˆ˜ 2X+3ì— ëŒ€í•œ ë¶„ì‚° ê³„ì‚°

# In[39]:


V(X, lambda x:2*x+3)


# ![](ë¶„ì‚°ì˜ê³µì‹.png)

# In[42]:


2**2 * V(X)

